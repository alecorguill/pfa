<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--<link type="text/css" rel="stylesheet" href="accueil.css" />-->
<link rel="stylesheet" href="style_poker_main_page.css" />
<title>Lobby ${requestScope.game}</title>
</head>
<body>
  <center><h1>Bienvenue sur le Poker !</h1>
  </center>
  <div id="poker">
    <fieldset>
      <legend> Liste des joueurs dans le lobby :</legend>
      <p id="player_list"> ${applicationScope.players.toString()}</p>
    </fieldset>
  </div>
  
  <script> 

  function updatePlayer() {
	  
	    var xhr = new XMLHttpRequest();
	    xhr.open('GET', 'http://localhost:8080/neoblik/lobby?game=Poker');
	    xhr.addEventListener('readystatechange', function() { // On gère ici une requête asynchrone

	        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) { // Si le fichier est chargé sans erreur
	        
	        	console.log(xhr.reponseXML);
	            document.getElementById('player_list').innerHTML = xhr.response;
	       	

	        }

	    });
		xhr.responseType = "document";
	    xhr.send(null); // La requête est prête, on envoie tout !
	}
  
  setTimeout(updatePlayer, 3000);

  
  </script>
</body>
</html>
